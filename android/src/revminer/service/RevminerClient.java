package revminer.service;

import java.io.IOException;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONTokener;

import revminer.common.Restaurant;
import android.content.Context;
import android.util.Log;
import android.widget.Toast;

// singleton
public class RevminerClient implements SearchDataProvider {
  private static final String REST_URL = "http://cse454.local-box.org:3000/revminer/";
  private static final String JSON_TEST = "{\"results\":{\"meta\":{\"ristorante-machiavelli-seattle-2\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 621-7941\",\"Takes Reservations\":\"No\",\"Neighborhood\":\"Capitol Hill\",\"Ambience\":\"Casual\",\"Good For\":\"Dinner\",\"Latitude\":\"47.614966\",\"Business Name\":\"Ristorante Machiavelli\",\"Good for Groups\":\"No\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Sat 5 pm - 11 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"No\",\"Has TV\":\"No\",\"Address\":\"1215 Pine St, Seattle, WA\",\"Longitude\":\"-122.3285881\"},\"the-pink-door-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 443-3241\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Downtown\",\"Ambience\":\"Romantic, Casual, Intimate\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6103351\",\"Good for Groups\":\"Yes\",\"Business Name\":\"The Pink Door\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street, Validated\",\"Hours\":\"Mon-Thu 11:30 am - 11:30 pm & Fri-Sat 11:30 am - 1 am & Sun 4 pm - 11 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Loud\",\"Wheelchair Accessible\":\"No\",\"Has TV\":\"No\",\"Address\":\"1919 Post Alley, between Stuart &amp; Virginia, Seattle, WA\",\"Longitude\":\"-122.3424066\"},\"maggianos-little-italy-bellevue\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(425) 519-6476\",\"Takes Reservations\":\"Yes\",\"Caters\":\"Yes\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6173233\",\"Business Name\":\"Maggiano's Little Italy\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Garage\",\"Hours\":\"Mon-Thu, Sun 11:30 am - 10 pm & Fri-Sat 11:30 am - 11 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Bellevue\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Loud\",\"Wheelchair Accessible\":\"Yes\",\"Address\":\"10455 NE 8th St, Bellevue, WA\",\"Has TV\":\"No\",\"Longitude\":\"-122.2007859\"},\"ristorante-mamma-melina-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 632-2271\",\"Takes Reservations\":\"Yes\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6677833\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Ristorante Mamma Melina\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Street\",\"Hours\":\"Mon-Thu, Sun 11:30 am - 9:30 pm & Fri-Sat 11:30 am - 10 pm\",\"Take-out\":\"No\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Very Loud\",\"Address\":\"5101 25th Ave NE, Seattle, WA\",\"Has TV\":\"No\",\"Wheelchair Accessible\":\"Yes\",\"Longitude\":\"-122.3008284\"},\"osteria-la-spiga-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 323-8881\",\"Takes Reservations\":\"Yes\",\"Caters\":\"No\",\"Neighborhood\":\"Capitol Hill\",\"Ambience\":\"Classy\",\"Good For\":\"Dinner\",\"Latitude\":\"47.613272\",\"Business Name\":\"Osteria La Spiga\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Thu, Sun 5 pm - 11 pm & Fri-Sat 5 pm - 12 am\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"1429 12th Ave, Seattle, WA\",\"Longitude\":\"-122.316821\"},\"bizzarro-italian-cafe-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 632-7277\",\"Takes Reservations\":\"Yes\",\"Caters\":\"No\",\"Neighborhood\":\"Wallingford\",\"Ambience\":\"Hipster, Romantic, Trendy, Casual, Intimate\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6620534\",\"Business Name\":\"Bizzarro Italian Café\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Beer &amp; Wine Only\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Sun 5 pm - 10 pm\",\"Take-out\":\"No\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"1307 N 46th St, Seattle, WA\",\"Longitude\":\"-122.3417311\"},\"buca-di-beppo-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 284-1892\",\"Takes Reservations\":\"Yes\",\"Caters\":\"Yes\",\"Ambience\":\"Casual\",\"Good For\":\"Dinner\",\"Latitude\":\"47.625575\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Buca di Beppo\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Garage, Street\",\"Hours\":\"Mon-Thu 4 pm - 10 pm & Fri 4 pm - 11 pm & Sat 11 am - 11 pm & Sun 11 am - 10 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Loud\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"Yes\",\"Address\":\"701 9th Ave N, Seattle, WA\",\"Longitude\":\"-122.340132\"},\"volterra-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 789-5100\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Ballard\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6678009033\",\"Business Name\":\"Volterra\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Take-out\":\"No\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Quiet\",\"Address\":\"5411 Ballard Ave NW, Seattle, WA\",\"Has TV\":\"No\",\"Wheelchair Accessible\":\"Yes\",\"Longitude\":\"-122.385002136\"},\"tavolata-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 838-8008\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Belltown\",\"Ambience\":\"Hipster, Romantic, Trendy, Intimate\",\"Good For\":\"Dinner\",\"Latitude\":\"47.614423\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Tavolata\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Thu, Sun 5 pm - 11 pm & Fri-Sat 5 pm - 12 am\",\"Take-out\":\"Yes\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"2323 2nd Ave, Seattle, WA\",\"Longitude\":\"-122.34669\"},\"barolo-ristorante-seattle\":{\"Attire\":\"Dressy\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 770-9000\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Belltown\",\"Ambience\":\"Trendy\",\"Good For\":\"Dinner\",\"Latitude\":\"47.614655\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Barolo Ristorante\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Thu 11:30 am - 10:30 pm & Fri 11:30 am - 11 pm & Sat 4:30 pm - 11 pm & Sun 4:30 pm - 10:30 pm\",\"Take-out\":\"No\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"1940 Westlake Ave, Metropolitan Tower, Seattle, WA\",\"Longitude\":\"-122.337323\"},\"serafina-seattle\":{\"Coat Check\":\"Yes\",\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 323-0807\",\"Takes Reservations\":\"Yes\",\"Categories\":\"Restaurants, Italian, Nightlife, Bars, Arts &amp; Entertainment, Music Venues, Nightlife, Music Venues\",\"Smoking\":\"No\",\"Neighborhood\":\"Eastlake\",\"Ambience\":\"Classy\",\"Best Nights\":\"Tue, Fri, Wed\",\"Good For\":\"Dinner\",\"Music\":\"Live\",\"Latitude\":\"47.637737\",\"Business Name\":\"Serafina\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Happy Hour\":\"Yes\",\"Good for Kids\":\"No\",\"Parking\":\"Street, Private Lot\",\"Hours\":\"Mon-Fri 11:30 am - 2:30 pm & Mon-Thu, Sun 5 pm - 10 pm & Fri-Sat 5 pm - 11 pm & Sun 10 am - 2:30 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Noise Level\":\"Loud\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"2043 Eastlake Ave E, Seattle, WA\",\"Longitude\":\"-122.325902\",\"Good For Dancing\":\"No\"},\"serious-pie-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 838-7388\",\"Takes Reservations\":\"No\",\"Caters\":\"No\",\"Neighborhood\":\"Downtown\",\"Ambience\":\"Casual\",\"Good For\":\"Dinner\",\"Latitude\":\"47.612553\",\"Business Name\":\"Serious Pie\",\"Good for Groups\":\"No\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Beer &amp; Wine Only\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Wed, Sun 11 am - 10 pm & Thu-Sat 11 am - 11 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Pizza\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"316 Virginia St, Seattle, WA\",\"Longitude\":\"-122.340735\"},\"panevino-seattle\":{\"Coat Check\":\"No\",\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 328-7817\",\"Takes Reservations\":\"Yes\",\"Categories\":\"Restaurants, Italian, Nightlife, Bars, Wine Bars\",\"Smoking\":\"No\",\"Neighborhood\":\"Capitol Hill\",\"Ambience\":\"Casual\",\"Best Nights\":\"Fri, Thu, Sat\",\"Good For\":\"Dinner\",\"Music\":\"Background\",\"Latitude\":\"47.622555\",\"Business Name\":\"Panevino\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Happy Hour\":\"Yes\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Noise Level\":\"Loud\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"416 Broadway E, Seattle, WA\",\"Longitude\":\"-122.320593\",\"Good For Dancing\":\"No\"},\"tutta-bella-neapolitan-pizzeria-seattle-9\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 633-3800\",\"Takes Reservations\":\"Yes\",\"Categories\":\"Restaurants, Italian, Restaurants, Pizza\",\"Caters\":\"No\",\"Neighborhood\":\"Wallingford\",\"Ambience\":\"Casual\",\"Good For\":\"Lunch, Dinner\",\"Latitude\":\"47.6604393\",\"Business Name\":\"Tutta Bella Neapolitan Pizzeria\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Beer &amp; Wine Only\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Street, Private Lot\",\"Hours\":\"Mon-Thu, Sun 11 am - 10 pm & Fri-Sat 11 am - 11 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Noise Level\":\"Loud\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"4411 Stone Way N, Seattle, WA\",\"Longitude\":\"-122.342378\"},\"perche-no-pasta-and-vino-seattle-2\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 547-0222\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Wallingford\",\"Good For\":\"Dinner\",\"Latitude\":\"47.664142\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Perche' No Pasta &amp; Vino\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Street\",\"Hours\":\"Tue-Thu, Sun 4 pm - 10 pm & Fri-Sat 4 pm - 11 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Address\":\"1319 N 49th St, Seattle, WA\",\"Has TV\":\"No\",\"Longitude\":\"-122.341201\"},\"cascina-spinasse-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 251-7673\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Capitol Hill\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6149922\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Cascina Spinasse\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon, Wed-Thu, Sun 5 pm - 10 pm & Fri-Sat 5 pm - 11 pm\",\"Take-out\":\"No\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Quiet\",\"Wheelchair Accessible\":\"Yes\",\"Address\":\"1531 14th Ave, Seattle, WA\",\"Has TV\":\"No\",\"Longitude\":\"-122.3142603\"},\"tropea-ristorante-italiano-redmond\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(425) 867-1082\",\"Takes Reservations\":\"No\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6749992371\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Tropea Ristorante Italiano\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Beer &amp; Wine Only\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Private Lot\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Redmond\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Address\":\"8042 161st Ave NE, Redmond, WA\",\"Has TV\":\"Yes\",\"Wheelchair Accessible\":\"Yes\",\"Longitude\":\"-122.125\"},\"salvatore-ristorante-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 527-9301\",\"Takes Reservations\":\"No\",\"Neighborhood\":\"Roosevelt\",\"Ambience\":\"Romantic, Classy, Casual, Intimate\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6729011536\",\"Business Name\":\"Salvatore Ristorante\",\"Good for Groups\":\"Yes\",\"Business type\":\"restaurant\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Tue-Thu 5 pm - 10 pm & Fri-Sat 5 pm - 10:30 pm & Sun 5 pm - 9:30 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Loud\",\"Address\":\"6100 Roosevelt Way NE, Seattle, WA\",\"Has TV\":\"No\",\"Wheelchair Accessible\":\"Yes\",\"Longitude\":\"-122.317001343\"},\"il-bistro-seattle\":{\"Coat Check\":\"Yes\",\"Attire\":\"Dressy\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 682-3049\",\"Takes Reservations\":\"Yes\",\"Categories\":\"Restaurants, Italian, Nightlife, Bars, Lounges\",\"Smoking\":\"No\",\"Neighborhood\":\"Downtown\",\"Ambience\":\"Romantic, Intimate\",\"Best Nights\":\"Tue, Wed, Thu\",\"Good For\":\"Dinner\",\"Music\":\"Juke Box\",\"Latitude\":\"47.6086899\",\"Business Name\":\"il Bistro\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Happy Hour\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Sun 5 pm - 2 am\",\"Take-out\":\"Yes\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Noise Level\":\"Quiet\",\"Has TV\":\"No\",\"Address\":\"93 Pike St, Ste A, Seattle, WA\",\"Longitude\":\"-122.3405486\",\"Good For Dancing\":\"No\"},\"via-tribunali-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 322-9234\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Capitol Hill\",\"Ambience\":\"Romantic\",\"Good For\":\"Dinner\",\"Latitude\":\"47.614079\",\"Business Name\":\"Via Tribunali\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Wed-Sat 5 pm - 2 am\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Pizza\",\"Noise Level\":\"Loud\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"913 E Pike St, Seattle, WA\",\"Longitude\":\"-122.320615\"},\"palomino-restaurant-rotisseria-bar-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 623-1300\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Downtown\",\"Ambience\":\"Classy, Trendy\",\"Good For\":\"Lunch, Dinner\",\"Latitude\":\"47.610575\",\"Business Name\":\"Palomino Restaurant Rotisseria Bar\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Garage\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, American (New)\",\"Noise Level\":\"Average\",\"Address\":\"1420 5th Ave, Ste 350, Seattle, WA\",\"Wheelchair Accessible\":\"Yes\",\"Longitude\":\"-122.334738\"},\"la-vita-e-bella-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 441-5322\",\"Takes Reservations\":\"Yes\",\"Categories\":\"Restaurants, Italian, Restaurants, Pizza, Restaurants, Mediterranean\",\"Neighborhood\":\"Belltown\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6148986816\",\"Good for Groups\":\"Yes\",\"Business Name\":\"La Vita E Bella\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Thu 11:30 am - 10 pm & Fri-Sat 11:30 am - 11 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Noise Level\":\"Average\",\"Address\":\"2411 2nd Ave, Seattle, WA\",\"Wheelchair Accessible\":\"Yes\",\"Longitude\":\"-122.347000122\"},\"ristorante-picolinos-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 781-8000\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Ballard\",\"Good For\":\"Dinner\",\"Latitude\":\"47.675263\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Ristorante Picolino's\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Street\",\"Hours\":\"Mon, Sun 11 am - 9 pm & Tue-Sat 11 am - 10 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Loud\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"Yes\",\"Address\":\"6415 32nd Ave NW, Seattle, WA\",\"Longitude\":\"-122.398405\"},\"firenze-ristorante-italiano-bellevue-2\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(425) 957-1077\",\"Takes Reservations\":\"Yes\",\"Good For\":\"Dinner\",\"Latitude\":\"47.617099762\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Firenze Ristorante Italiano\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Private Lot\",\"Hours\":\"Mon-Fri 11:30 am - 2 pm & Mon-Sun 5 pm - 10:30 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$$\",\"City\":\"Bellevue\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Loud\",\"Address\":\"15600 NE 8th St, Bellevue, WA\",\"Has TV\":\"No\",\"Wheelchair Accessible\":\"Yes\",\"Longitude\":\"-122.132003784\"},\"assaggio-ristorante-seattle\":{\"Attire\":\"Dressy\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 441-1399\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Belltown\",\"Ambience\":\"Romantic, Classy\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6137008667\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Assaggio Ristorante\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Fri 11 am - 2 pm & Mon-Sat 5 pm - 10 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Quiet\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"Yes\",\"Address\":\"2010 4th Ave, Seattle, WA\",\"Longitude\":\"-122.341003418\"},\"frankies-pizza-and-pasta-redmond\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(425) 883-8407\",\"Takes Reservations\":\"No\",\"Categories\":\"Restaurants, Italian, Restaurants, Pizza\",\"Ambience\":\"Casual\",\"Good For\":\"Lunch, Dinner\",\"Latitude\":\"47.6730003357\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Frankie's Pizza &amp; Pasta\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Beer &amp; Wine Only\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Private Lot\",\"Hours\":\"Mon-Thu 11 am - 9 pm & Fri-Sat 11 am - 10 pm & Sun 4 pm - 9 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Redmond\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"16630 Redmond Way, Redmond, WA\",\"Longitude\":\"-122.119003296\"},\"il-fornaio-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 264-0994\",\"Takes Reservations\":\"Yes\",\"Categories\":\"Food, Bakeries, Restaurants, Italian, Restaurants, Delis\",\"Caters\":\"Yes\",\"Neighborhood\":\"Downtown\",\"Good For\":\"Dinner\",\"Latitude\":\"47.612427\",\"Business Name\":\"Il Fornaio\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Garage, Street\",\"Hours\":\"Mon-Thu, Sun 11:30 am - 10 pm & Fri-Sat 11:30 am - 11 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Noise Level\":\"Quiet\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"600 Pine St, Ste 132, Seattle, WA\",\"Longitude\":\"-122.335349\"},\"la-rustica-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 932-3020\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"West Seattle\",\"Good For\":\"Dinner\",\"Latitude\":\"47.567508\",\"Business Name\":\"La Rustica\",\"Good for Groups\":\"No\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Tue-Thu 5 pm - 10 pm & Fri-Sat 5 pm - 10:30 pm & Sun 5 pm - 9:30 pm\",\"Take-out\":\"No\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Address\":\"4100 Beach Dr SW, Ste A, Seattle, WA\",\"Wheelchair Accessible\":\"Yes\",\"Longitude\":\"-122.409528\"},\"brads-swingside-cafe-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 633-4057\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Fremont\",\"Good For\":\"Dinner\",\"Latitude\":\"47.658183\",\"Good for Groups\":\"No\",\"Business Name\":\"Brad's Swingside Cafe\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Alcohol\":\"Beer &amp; Wine Only\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Sun 5:30 pm - 10 pm\",\"Take-out\":\"No\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Address\":\"4212 Fremont Ave N, Seattle, WA\",\"Has TV\":\"No\",\"Wheelchair Accessible\":\"Yes\",\"Longitude\":\"-122.349662\"},\"old-spaghetti-factory-seattle-2\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 441-7724\",\"Takes Reservations\":\"Yes\",\"Caters\":\"Yes\",\"Neighborhood\":\"Belltown\",\"Good For\":\"Dinner\",\"Latitude\":\"47.61532\",\"Business Name\":\"Old Spaghetti Factory\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Private Lot\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Quiet\",\"Wheelchair Accessible\":\"Yes\",\"Address\":\"2801 Elliott Ave., Seattle, WA\",\"Has TV\":\"No\",\"Longitude\":\"-122.35405\"},\"cantinetta-seattle\":{\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Attire\":\"Casual\",\"Good for Kids\":\"No\",\"Hours\":\"Tue-Thu, Sun 5 pm - 10 pm & Fri-Sat 5 pm - 11 pm\",\"Phone number\":\"(206) 632-1000\",\"Price Range\":\"$$$\",\"Takes Reservations\":\"Yes\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Neighborhood\":\"Wallingford\",\"Ambience\":\"Romantic, Intimate\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Good For\":\"Dinner\",\"Address\":\"3650 Wallingford Ave, Seattle, WA\",\"Latitude\":\"47.6516851\",\"Longitude\":\"-122.3363087\",\"Business Name\":\"Cantinetta\",\"Good for Groups\":\"Yes\",\"Business type\":\"restaurant\"},\"tulio-ristorante-seattle\":{\"Attire\":\"Dressy\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 624-5500\",\"Takes Reservations\":\"Yes\",\"Caters\":\"No\",\"Neighborhood\":\"Downtown\",\"Ambience\":\"Romantic\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6074349\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Tulio Ristorante\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Garage, Street, Valet\",\"Hours\":\"Mon-Thu 7 am - 10 pm & Fri 7 am - 11 pm & Sat 8 am - 11 pm & Sun 8 am - 10 pm\",\"Take-out\":\"No\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"Hotel Vintage Park, 1100 5th Ave, Seattle, WA\",\"Longitude\":\"-122.3323758\"},\"romanos-macaroni-grill-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 838-6009\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Northgate\",\"Good For\":\"Dinner\",\"Latitude\":\"47.708592\",\"Business Name\":\"Romano's Macaroni Grill\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Private Lot\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Address\":\"401 NE Northgate Way, #1103, Seattle, WA\",\"Has TV\":\"Yes\",\"Longitude\":\"-122.3245945\"},\"salumi-artisan-cured-meats-seattle-2\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 621-8772\",\"Takes Reservations\":\"No\",\"Categories\":\"Restaurants, Delis, Food, Specialty Food, Meat Shops\",\"Caters\":\"No\",\"Neighborhood\":\"Pioneer Square\",\"Ambience\":\"Casual\",\"Good For\":\"Lunch\",\"Latitude\":\"47.5997289\",\"Business Name\":\"Salumi Artisan Cured Meats\",\"Good for Groups\":\"No\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Alcohol\":\"Beer &amp; Wine Only\",\"Waiter Service\":\"No\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Tue-Fri 11 am - 4 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"No\",\"Has TV\":\"No\",\"Address\":\"309 3rd Ave S, Seattle, WA\",\"Longitude\":\"-122.3305171\"},\"how-to-cook-a-wolf-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 838-8090\",\"Takes Reservations\":\"No\",\"Caters\":\"No\",\"Neighborhood\":\"Queen Anne\",\"Ambience\":\"Classy\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6386953\",\"Business Name\":\"How To Cook A Wolf\",\"Good for Groups\":\"No\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Thu, Sun 5 pm - 11 pm & Fri-Sat 5 pm - 12 am\",\"Take-out\":\"No\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"2208 Queen Anne Ave N, Seattle, WA\",\"Longitude\":\"-122.3569009\"},\"list-seattle\":{\"Coat Check\":\"No\",\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 441-1000\",\"Takes Reservations\":\"No\",\"Categories\":\"Nightlife, Bars, Lounges, Restaurants, Italian\",\"Smoking\":\"No\",\"Caters\":\"No\",\"Neighborhood\":\"Belltown\",\"Ambience\":\"Trendy, Intimate\",\"Best Nights\":\"Mon, Wed, Sun\",\"Good For\":\"Late Night, Dinner\",\"Music\":\"Background\",\"Latitude\":\"47.6131564\",\"Business Name\":\"List\",\"Good for Groups\":\"No\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Happy Hour\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Sun 4 pm - 2 am\",\"Take-out\":\"No\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Noise Level\":\"Loud\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"2226 1st Ave, Seattle, WA\",\"Longitude\":\"-122.3461139\",\"Good For Dancing\":\"No\"},\"pasta-freska-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 283-1515\",\"Takes Reservations\":\"Yes\",\"Categories\":\"Restaurants, Pizza, Restaurants, Italian, Event Planning &amp; Services, Caterers\",\"Caters\":\"No\",\"Neighborhood\":\"Queen Anne\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6334991455\",\"Business Name\":\"Pasta Freska\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Beer &amp; Wine Only\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Thu 5 pm - 9 pm & Tue-Fri 11 am - 1:30 pm & Fri-Sat 5 pm - 10 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Noise Level\":\"Loud\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"1515 Westlake Ave N, Seattle, WA\",\"Longitude\":\"-122.341003418\"},\"anchovies-and-olives-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 838-8080\",\"Takes Reservations\":\"Yes\",\"Categories\":\"Restaurants, Italian, Restaurants, Seafood\",\"Neighborhood\":\"Capitol Hill\",\"Ambience\":\"Romantic, Trendy, Intimate\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6153297\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Anchovies &amp; Olives\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Thu, Sun 5 pm - 11 pm & Fri-Sat 5 pm - 12 am\",\"Take-out\":\"No\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"1550 15th Ave, Seattle, WA\",\"Longitude\":\"-122.3127949\"},\"lucia-italian-restaurant-kirkland\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(425) 889-0200\",\"Takes Reservations\":\"Yes\",\"Good For\":\"Dinner\",\"Latitude\":\"47.675394\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Lucia Italian Restaurant\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Private Lot\",\"Hours\":\"Mon-Thu 11 am - 12 am & Fri-Sat 11 am - 1 am & Sun 11 am - 11 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Kirkland\",\"Category\":\"Restaurants, Italian\",\"Address\":\"222 Parkplace Center, Ste C, Kirkland, WA\",\"Has TV\":\"No\",\"Wheelchair Accessible\":\"Yes\",\"Longitude\":\"-122.196985\"},\"il-terrazzo-carmine-seattle\":{\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Attire\":\"Dressy\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Fri 11:30 am - 2:30 pm & Mon-Sat 5:30 pm - 10 pm\",\"Take-out\":\"No\",\"Accepts Credit Cards\":\"Yes\",\"Price Range\":\"$$$\",\"Phone number\":\"(206) 467-7797\",\"Takes Reservations\":\"Yes\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Neighborhood\":\"Pioneer Square\",\"Wheelchair Accessible\":\"Yes\",\"Good For\":\"Dinner\",\"Address\":\"411 1st Ave S, Seattle, WA\",\"Latitude\":\"47.598793\",\"Longitude\":\"-122.33436\",\"Outdoor Seating\":\"Yes\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Il Terrazzo Carmine\",\"Business type\":\"restaurant\"},\"marcello-ristorante-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 527-4778\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Roosevelt\",\"Ambience\":\"Romantic\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6801986694\",\"Business Name\":\"Marcello Ristorante\",\"Good for Groups\":\"Yes\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Beer &amp; Wine Only\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Street, Private Lot\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Quiet\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"7115 Roosevelt Way NE, Seattle, WA\",\"Longitude\":\"-122.317001343\"},\"pomodoro-ristorante-italiano-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 324-3160\",\"Takes Reservations\":\"Yes\",\"Categories\":\"Restaurants, Italian, Restaurants, Spanish, Restaurants, Basque\",\"Neighborhood\":\"Eastlake\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6405172\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Pomodoro Ristorante Italiano\",\"Outdoor Seating\":\"No\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Garage, Street\",\"Hours\":\"Tue-Thu, Sun 5:30 pm - 12 am & Fri-Sat 5:30 pm - 1 am\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Address\":\"2366 Eastlake Ave E, Ste 101, Seattle, WA\",\"Has TV\":\"No\",\"Longitude\":\"-122.3258753\"},\"thats-amore-italian-restaurant-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 322-3677\",\"Takes Reservations\":\"Yes\",\"Categories\":\"Restaurants, Italian, Restaurants, Pizza\",\"Neighborhood\":\"Mt. Baker\",\"Good For\":\"Dinner\",\"Latitude\":\"47.589943\",\"Good for Groups\":\"Yes\",\"Business Name\":\"That's Amore Italian Restaurant\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Alcohol\":\"Beer &amp; Wine Only\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Street\",\"Hours\":\"Mon-Thu 5 pm - 9 pm & Fri-Sat 5 pm - 10 pm & Sun 10 am - 9 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Address\":\"1425 31st Ave S, Seattle, WA\",\"Has TV\":\"No\",\"Longitude\":\"-122.292401\"},\"tutta-bella-neapolitan-pizzeria-seattle-8\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 624-4422\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Belltown\",\"Good For\":\"Lunch, Dinner\",\"Latitude\":\"47.618213\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Tutta Bella Neapolitan Pizzeria\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Garage, Street, Validated\",\"Hours\":\"Mon-Thu, Sun 11 am - 10 pm & Fri-Sat 11 am - 11 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Pizza\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Address\":\"2200 Westlake Ave, Ste 112, Seattle, WA\",\"Longitude\":\"-122.338214\"},\"angelinas-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 932-4550\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"West Seattle\",\"Good For\":\"Dinner\",\"Latitude\":\"47.582553\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Angelina's\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Street, Private Lot\",\"Hours\":\"Mon-Fri 11:30 am - 1 am & Sat-Sun 9 am - 1 am\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Loud\",\"Wheelchair Accessible\":\"Yes\",\"Address\":\"2311 California Ave SW, Seattle, WA\",\"Has TV\":\"Yes\",\"Longitude\":\"-122.386879\"},\"branzino-seattle-3\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 728-5181\",\"Takes Reservations\":\"Yes\",\"Categories\":\"Restaurants, Seafood, Restaurants, Italian\",\"Neighborhood\":\"Belltown\",\"Ambience\":\"Romantic, Intimate\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6151226\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Branzino\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon, Sun 5 pm - 11 pm & Tue-Thu 5 pm - 12 am & Fri-Sat 5 pm - 1 am\",\"Take-out\":\"No\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Noise Level\":\"Loud\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"No\",\"Address\":\"2429 2nd Ave, Seattle, WA\",\"Longitude\":\"-122.3475235\"},\"cafe-veloce-kirkland\":{\"Alcohol\":\"Beer &amp; Wine Only\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Attire\":\"Casual\",\"Good for Kids\":\"Yes\",\"Parking\":\"Private Lot\",\"Take-out\":\"Yes\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(425) 814-2972\",\"Price Range\":\"$$\",\"Takes Reservations\":\"Yes\",\"City\":\"Kirkland\",\"Categories\":\"Restaurants, Italian, Restaurants, Pizza\",\"Ambience\":\"Casual\",\"Wheelchair Accessible\":\"Yes\",\"Has TV\":\"Yes\",\"Good For\":\"Dinner\",\"Address\":\"12514 120th Ave NE, Kirkland, WA\",\"Latitude\":\"47.7106018066\",\"Longitude\":\"-122.179000854\",\"Outdoor Seating\":\"Yes\",\"Business Name\":\"Cafe Veloce\",\"Good for Groups\":\"Yes\",\"Business type\":\"restaurant\"},\"piatti-ristorante-and-bar-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 524-9088\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"University District\",\"Good For\":\"Dinner\",\"Latitude\":\"47.6622665\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Piatti Ristorante &amp; Bar\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"Yes\",\"Parking\":\"Private Lot\",\"Hours\":\"Mon-Thu 11:30 am - 9 pm & Fri-Sat 11 am - 10 pm & Sun 11 am - 9 pm\",\"Take-out\":\"Yes\",\"Price Range\":\"$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Address\":\"2695 NE Village Ln, Seattle, WA\",\"Has TV\":\"Yes\",\"Longitude\":\"-122.2977309\"},\"pasta-nova-woodinville\":{\"Alcohol\":\"Beer &amp; Wine Only\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Attire\":\"Casual\",\"Good for Kids\":\"Yes\",\"Parking\":\"Private Lot\",\"Take-out\":\"Yes\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(425) 483-3716\",\"Price Range\":\"$$\",\"Takes Reservations\":\"Yes\",\"City\":\"Woodinville\",\"Category\":\"Restaurants, Italian\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"Yes\",\"Good For\":\"Dinner\",\"Address\":\"17310 140th Ave NE, Woodinville, WA\",\"Latitude\":\"47.7532293\",\"Longitude\":\"-122.1525067\",\"Outdoor Seating\":\"Yes\",\"Business Name\":\"Pasta Nova\",\"Good for Groups\":\"Yes\",\"Business type\":\"restaurant\"},\"grazie-ristorante-italiano-bothell\":{\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Attire\":\"Casual\",\"Good for Kids\":\"Yes\",\"Parking\":\"Private Lot\",\"Hours\":\"Mon-Thu 11 am - 9 pm & Fri 11 am - 10 pm & Sat 4 pm - 10 pm & Sun 4 pm - 9 pm\",\"Take-out\":\"Yes\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(425) 402-9600\",\"Price Range\":\"$$\",\"Takes Reservations\":\"Yes\",\"City\":\"Bothell\",\"Categories\":\"Restaurants, Pizza, Restaurants, Italian\",\"Noise Level\":\"Quiet\",\"Wheelchair Accessible\":\"Yes\",\"Good For\":\"Dinner\",\"Address\":\"23207 Bothell Everett Hwy, Bothell, WA\",\"Latitude\":\"47.7872009277\",\"Longitude\":\"-122.21900177\",\"Outdoor Seating\":\"Yes\",\"Good for Groups\":\"Yes\",\"Business Name\":\"Grazie Ristorante Italiano\",\"Business type\":\"restaurant\"},\"tilth-seattle\":{\"Attire\":\"Casual\",\"Accepts Credit Cards\":\"Yes\",\"Phone number\":\"(206) 633-0801\",\"Takes Reservations\":\"Yes\",\"Neighborhood\":\"Wallingford\",\"Good For\":\"Dinner\",\"Latitude\":\"47.66137\",\"Good for Groups\":\"No\",\"Business Name\":\"Tilth\",\"Outdoor Seating\":\"Yes\",\"Business type\":\"restaurant\",\"Wi-Fi\":\"No\",\"Alcohol\":\"Full Bar\",\"Waiter Service\":\"Yes\",\"Delivery\":\"No\",\"Good for Kids\":\"No\",\"Parking\":\"Street\",\"Hours\":\"Mon-Thu, Sun 5 pm - 10 pm & Fri-Sat 5 pm - 10:30 pm & Sat-Sun 10 am - 2 pm\",\"Take-out\":\"No\",\"Price Range\":\"$$$\",\"City\":\"Seattle\",\"Category\":\"Restaurants, American (New)\",\"Noise Level\":\"Average\",\"Wheelchair Accessible\":\"No\",\"Has TV\":\"No\",\"Address\":\"1411 N 45th St, Seattle, WA\",\"Longitude\":\"-122.340586\"}},\"data\":{\"ristorante-machiavelli-seattle-2\":6643,\"the-pink-door-seattle\":6357,\"maggianos-little-italy-bellevue\":5562,\"ristorante-mamma-melina-seattle\":5152,\"osteria-la-spiga-seattle\":4633,\"bizzarro-italian-cafe-seattle\":4500,\"buca-di-beppo-seattle\":3036,\"volterra-seattle\":2835,\"tavolata-seattle\":2352,\"barolo-ristorante-seattle\":2112,\"serafina-seattle\":2080,\"serious-pie-seattle\":1665,\"panevino-seattle\":1653,\"tutta-bella-neapolitan-pizzeria-seattle-9\":1323,\"perche-no-pasta-and-vino-seattle-2\":1254,\"cascina-spinasse-seattle\":1248,\"tropea-ristorante-italiano-redmond\":1066,\"salvatore-ristorante-seattle\":1044,\"il-bistro-seattle\":1040,\"via-tribunali-seattle\":992,\"palomino-restaurant-rotisseria-bar-seattle\":980,\"la-vita-e-bella-seattle\":969,\"ristorante-picolinos-seattle\":944,\"firenze-ristorante-italiano-bellevue-2\":899,\"assaggio-ristorante-seattle\":836,\"frankies-pizza-and-pasta-redmond\":820,\"il-fornaio-seattle\":806,\"la-rustica-seattle\":806,\"brads-swingside-cafe-seattle\":792,\"old-spaghetti-factory-seattle-2\":742,\"cantinetta-seattle\":682,\"tulio-ristorante-seattle\":610,\"romanos-macaroni-grill-seattle\":605,\"salumi-artisan-cured-meats-seattle-2\":550,\"how-to-cook-a-wolf-seattle\":540,\"list-seattle\":496,\"pasta-freska-seattle\":484,\"anchovies-and-olives-seattle\":483,\"lucia-italian-restaurant-kirkland\":450,\"il-terrazzo-carmine-seattle\":448,\"marcello-ristorante-seattle\":441,\"pomodoro-ristorante-italiano-seattle\":420,\"thats-amore-italian-restaurant-seattle\":406,\"tutta-bella-neapolitan-pizzeria-seattle-8\":385,\"angelinas-seattle\":384,\"branzino-seattle-3\":360,\"cafe-veloce-kirkland\":360,\"piatti-ristorante-and-bar-seattle\":360,\"pasta-nova-woodinville\":360,\"grazie-ristorante-italiano-bothell\":345,\"tilth-seattle\":330},\"query\":\"[ { v: 'good' }, { v: 'italian' } ]\",\"num\":345,\"suggestions\":[],\"time\":4379}}";
	private final List<SearchResultListener> resultListeners;
	private final List<SearchListener> searchListeners;

	private SearchResultEvent lastSearchResultEvent;

	private static RevminerClient client;
	
	private RevminerClient() {
		resultListeners = new ArrayList<SearchResultListener>();
		searchListeners = new ArrayList<SearchListener>();

		// TODO: set to null, currently test code
		List<Restaurant> res = new ArrayList<Restaurant>();
    res.add(new Restaurant("one"));
    res.add(new Restaurant("two"));
    res.add(new Restaurant("three"));
    res.add(new Restaurant("four"));
		lastSearchResultEvent = new SearchResultEvent(res);
	}
	
	public static RevminerClient Client() {
		if (client == null)
			client = new RevminerClient();
		return client;
	}

	public void addSearchResultListener(SearchResultListener listener) {
		resultListeners.add(listener);
	}
	
	public void addSearchListener(SearchListener listener) {
		searchListeners.add(listener);
	}

	// TODO: remove context from this interface once we actually implement the query logic
	public boolean sendSearchQuery(String query, Context context) {

		// TODO: actually perform query instead of making this little popup
        Toast.makeText(context, "Query: \"" + query +"\"", Toast.LENGTH_SHORT).show();

        for (SearchListener listener : searchListeners)
        	listener.onSearch(query);

        // TODO: Lets add some parallelism
        Log.d("revd", "Query for: " + query);

        String result = SimpleHttpClient.get(REST_URL + URLEncoder.encode(query));
        if (result == null) {
          Log.d("revd", "null result");
          return false;
        }
        Log.d("revd", "results received for " + query);

        
        // TODO: update once true query logic is implemented
        // TODO: handle case when we get "suggestions" or "match"
        List<Restaurant> res = new ArrayList<Restaurant>();
        try {
          JSONObject object = (JSONObject) new JSONTokener(result).nextValue();
          if (object.has("results")) {
            JSONObject results = object.getJSONObject("results");; 

            if (results.has("meta") && results.has("data")) {
              JSONObject meta = results.getJSONObject("meta");
              JSONObject data = results.getJSONObject("data");

              Iterator<String> places = data.keys();
              while (places.hasNext()) {
                String place = places.next();
                Log.d("revd", place);

                Restaurant restaurant = Restaurant.getInstance(place);
                if (restaurant == null) { // don't have it cached, we need to make an instance
                  restaurant = getRestaurantFromMeta(place, meta);
                }
                res.add(Restaurant.getInstance(place));
              }
            }
          }
          
          notifySearchResultEvent(new SearchResultEvent(res));
        } catch (JSONException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
        }
        // !

		return false;
	}

	private static final Restaurant getRestaurantFromMeta(String name, JSONObject meta) {
	  String key = name;
	  HashMap<String, String> attributeMapping;
	  
    try {
      attributeMapping = new HashMap<String, String>();
      JSONObject attributes = attributes = meta.getJSONObject(key);
      
      Iterator<String> attributesIter = attributes.keys();
      while (attributesIter.hasNext()) {
        String attr = attributesIter.next();
        String value = attributes.getString(attr);
        attributeMapping.put(attr,  value);                  
      }
    } catch (JSONException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
      return null;
    }

     return Restaurant.createInstance(key, attributeMapping);
	}

  public SearchResultEvent getLastSearchResultEvent() {
    return lastSearchResultEvent;
  }

  private void notifySearchResultEvent(SearchResultEvent e) {
    this.lastSearchResultEvent = e;
    for (SearchResultListener listener : resultListeners) {
      listener.onSearchResults(e);
    }
  }
  
  
}